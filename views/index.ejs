<!-- views/index.ejs -->
<%- include('partials/header') %>
<%- include('partials/sidebar') %>

<div id="main-content" class="flex-1 ml-64 transition-all">
  <div class="p-8">
    <div class="flex justify-between items-center mb-6">
      <div class="flex items-center space-x-2">
        <select id="track-selector" class="bg-white border border-gray-300 rounded-md py-2 pl-4 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none">
          <!-- Track options will be loaded here -->
          <option value="" disabled selected>Select Track</option>
        </select>
        <button id="add-track-btn" class="bg-blue-500 hover:bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-blue-500">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>

      <div>
        <button id="toggle-graph-btn" class="bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
          Show Graph
        </button>
      </div>
    </div>

    <!-- Timer section -->
    <div id="timer-section" class="bg-white rounded-lg shadow-md p-8 mb-6">
      <div class="flex flex-col items-center justify-center">
        <div id="timer-display" class="timer text-center mb-4">00:00.000</div>
        <div id="timer-status" class="w-4 h-4 rounded-full bg-gray-300 mb-4"></div>
        <div id="scramble-display" class="text-lg font-mono mb-4 text-center hidden"></div>
        <button id="scramble-btn" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
          Generate Scramble
        </button>
        <button id="done-scrambling-btn" class="bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 mt-2 hidden">
          Done Scrambling
        </button>
      </div>
    </div>

    <!-- Graph section -->
    <div id="graph-section" class="bg-white rounded-lg shadow-md p-6 mb-6 hidden relative">
      <canvas id="times-chart" class="h-96 w-full"></canvas>
    </div>

    <!-- Times list section -->
    <div id="times-section" class="bg-white rounded-lg shadow-md p-6">
      <h3 id="times-header" class="text-lg font-semibold mb-4">Recent Times</h3>
      <div id="times-list" class="space-y-3 max-h-96 overflow-y-auto">
        <!-- Times will be loaded here -->
        <p class="text-gray-500 text-center p-4">No times recorded yet.</p>
      </div>
    </div>
  </div>
</div>

<!-- Add Track Modal -->
<div id="add-track-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md">
    <h3 class="text-lg font-semibold mb-4">Add New Track</h3>
    <form id="add-track-form">
      <div class="mb-4">
        <label for="track-name" class="block text-sm font-medium text-gray-700 mb-1">Track Name</label>
        <input type="text" id="track-name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
      </div>
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-1">Theme Color</label>
        <div class="flex space-x-2">
          <button type="button" data-color="blue" class="w-8 h-8 rounded-full bg-blue-200 border-2 border-transparent focus:outline-none focus:border-blue-500"></button>
          <button type="button" data-color="red" class="w-8 h-8 rounded-full bg-red-200 border-2 border-transparent focus:outline-none focus:border-red-500"></button>
          <button type="button" data-color="green" class="w-8 h-8 rounded-full bg-green-200 border-2 border-transparent focus:outline-none focus:border-green-500"></button>
          <button type="button" data-color="yellow" class="w-8 h-8 rounded-full bg-yellow-200 border-2 border-transparent focus:outline-none focus:border-yellow-500"></button>
          <button type="button" data-color="purple" class="w-8 h-8 rounded-full bg-purple-200 border-2 border-transparent focus:outline-none focus:border-purple-500"></button>
          <button type="button" data-color="orange" class="w-8 h-8 rounded-full bg-orange-200 border-2 border-transparent focus:outline-none focus:border-orange-500"></button>
        </div>
        <input type="hidden" id="track-theme" value="blue">
      </div>
      <div class="flex justify-end space-x-2">
        <button type="button" id="cancel-add-track" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500">Cancel</button>
        <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Add Track</button>
      </div>
    </form>
  </div>
</div>

<script src="/js/timer.js"></script>
<script src="/js/scrambler.js"></script>
<script src="/js/profile.js"></script>
<script src="/js/graph.js"></script>

<%- include('partials/footer') %>
